# DNS-Relay-Server
**计算机网络课程设计——基于UDP协议的DNS中继服务器**

---
### DNS中继服务器简介
根据"域名-IP地址"对照表，当客户端查询域名对应的IP地址时，用域名检索对照表，有三种结果结果：
+ 检索结果为IP地址0.0.0.0，则向客户端返回"域名不存在"的报错信息，而不是IP地址0.0.0.0（屏蔽）；
+ 检索结果为普通IP地址，则向用户返回这个地址（查询）；
+ 表中未检测到域名，则向因特网DNS服务器发出查询，并将结果返回给客户端（中继）。   

该DNS服务器支持多个计算机的客户端同时查询，并且能进行消息ID的转换。

---
### 服务器功能
+ 缓存功能   
将对照表文件中的域名和IP地址信息存储到缓存链表中，每次查询直接访问缓存链表；
并且可以将服务器中获得的信息使用**LRU**算法（双向链表实现）进行存储。
+ 查询功能  
首先在双向链表中查询，然后在缓存链表中查询与域名地址对应的IP，如果查询成功，则将此IP地址制成应答报文返回给client客户端；
否则，原封不动地将查询报文发送给外部DNS服务器；
+ 迭代查询功能  
在查询功能的基础上接收DNS服务器的答案，分析后再将应答报文发送给客户端；
+ 黑名单功能 
对于缓存链表中IP地址为0.0.0.0的查询报文进行屏蔽处理，回复不存在该域名等信息；
+ 非阻塞功能 
在单线程的查询模式中加入了非阻塞功能，当有多个client对主机发出查询请求时，设置查询包的有效时间，防止客户端收到错误的查询信息。

---
#### 其他说明
本项目非本人独立完成，感谢WLF的帮助和支持。
